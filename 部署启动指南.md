# GameVault 游戏资产管理系统 - 部署启动指南

## 📋 目录
- [环境要求](#环境要求)
- [数据库配置](#数据库配置)
- [后端启动](#后端启动)
- [前端启动](#前端启动)
- [项目验证](#项目验证)
- [常见问题](#常见问题)
- [测试账号](#测试账号)

## 🔧 环境要求

### 必需软件
| 软件 | 版本要求 | 用途 | 下载地址 |
|------|----------|------|----------|
| **Node.js** | 16.0+ | 前端开发运行环境 | https://nodejs.org/ |
| **npm** | 8.0+ | Node.js包管理器 | 随Node.js安装 |
| **Java JDK** | 17+ | 后端运行环境 | https://adoptium.net/ |
| **Maven** | 3.6+ | Java项目构建工具 | https://maven.apache.org/ |
| **MySQL** | 8.0+ | 数据库 | https://dev.mysql.com/downloads/ |
| **Git** | 2.0+ | 版本控制 | https://git-scm.com/ |

### 推荐IDE
- **前端**: VS Code + Vue 3 扩展
- **后端**: IntelliJ IDEA 或 Eclipse
- **数据库**: MySQL Workbench 或 Navicat

## 🗄️ 数据库配置

### 1. 安装MySQL
```bash
# Windows用户下载MySQL安装包安装
# macOS用户使用Homebrew
brew install mysql

# Ubuntu用户使用apt
sudo apt install mysql-server
```

### 2. 启动MySQL服务
```bash
# Windows
net start mysql

# macOS/Linux
sudo systemctl start mysql
# 或
brew services start mysql
```

### 3. 创建数据库
```sql
-- 连接MySQL（默认用户root，密码123456）
mysql -u root -p

-- 创建数据库
CREATE DATABASE gamevault CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 创建用户（可选，使用root也可以）
CREATE USER 'gamevault'@'localhost' IDENTIFIED BY '123456';
GRANT ALL PRIVILEGES ON gamevault.* TO 'gamevault'@'localhost';
FLUSH PRIVILEGES;
```

### 4. 导入数据库结构和数据
```bash
# 在项目根目录执行
mysql -u root -p123456 gamevault < gamevault.sql
```

### 5. 验证数据库
```sql
-- 连接数据库
mysql -u root -p123456 gamevault

-- 查看表
SHOW TABLES;

-- 查看用户数据
SELECT * FROM users;
```

## 🍃 后端启动

### 1. 进入后端目录
```bash
cd springboot
```

### 2. 检查配置文件
编辑 `src/main/resources/application.yml`，确认数据库连接配置：

```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: 123456
    url: jdbc:mysql://localhost:3306/gamevault?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&useSSL=false&serverTimezone=GMT%2B8&allowPublicKeyRetrieval=true
```

### 3. 安装依赖并启动
```bash
# 清理并安装依赖
mvn clean install

# 启动应用（方式1：Maven）
mvn spring-boot:run

# 或者启动应用（方式2：Java）
mvn clean package
java -jar target/springboot-0.0.1-SNAPSHOT.jar
```

### 4. 验证后端启动
浏览器访问：
- API文档：http://localhost:8080/swagger-ui.html
- 健康检查：http://localhost:8080/test/health

期望看到：
```json
{
  "status": "UP",
  "message": "GameVault Backend is running!",
  "timestamp": 1672531200000
}
```

## 🎨 前端启动

### 1. 进入前端目录
```bash
cd vue
```

### 2. 安装依赖
```bash
# 使用npm
npm install

# 或使用yarn（如果已安装）
yarn install
```

### 3. 启动开发服务器
```bash
# 使用npm
npm run dev

# 或使用yarn
yarn dev
```

### 4. 验证前端启动
浏览器访问：http://localhost:5173

期望看到GameVault登录页面。

## ✅ 项目验证

### 1. 完整启动检查
确保以下服务都在运行：
- [ ] MySQL服务：端口3306
- [ ] 后端服务：端口8080
- [ ] 前端服务：端口5173

### 2. 功能测试
1. **登录测试**
   - 访问：http://localhost:5173
   - 使用测试账号登录（见下方测试账号）

2. **API测试**
   - 访问：http://localhost:8080/test/health
   - 应该返回正常状态

3. **数据库连接测试**
   - 访问：http://localhost:8080/test/db
   - 应该返回数据库连接成功

### 3. 端口占用检查
```bash
# Windows检查端口
netstat -ano | findstr :3306
netstat -ano | findstr :8080
netstat -ano | findstr :5173

# macOS/Linux检查端口
lsof -i :3306
lsof -i :8080
lsof -i :5173
```

## 👤 测试账号

| 角色 | 用户名 | 密码 | 权限说明 |
|------|--------|------|----------|
| **管理员** | admin | 123456 | 所有功能权限，包括用户管理、系统设置 |
| **经理** | manager | 123456 | 管理功能权限，包括审核、项目管理 |
| **普通用户** | user | 123456 | 基础功能权限，资产上传和查看 |

## 🚀 生产环境部署

### 1. 前端构建
```bash
cd vue
npm run build
```

### 2. 后端打包
```bash
cd springboot
mvn clean package -Dmaven.test.skip=true
```

### 3. 部署结构
```
部署目录/
├── gamevault-backend.jar    # 后端jar包
├── dist/                    # 前端构建文件
├── uploads/                 # 文件上传目录
└── logs/                    # 日志目录
```

### 4. 生产环境配置
修改 `application.yml` 中的配置：
```yaml
server:
  port: 8080

spring:
  datasource:
    url: jdbc:mysql://生产数据库地址:3306/gamevault
    username: 生产数据库用户名
    password: 生产数据库密码

file:
  upload:
    path: /data/uploads/
```

## ❗ 常见问题

### 1. 数据库连接失败
**错误**: `Communications link failure`
**解决方案**:
```bash
# 检查MySQL服务是否启动
sudo systemctl status mysql

# 检查端口是否被占用
netstat -ano | findstr :3306

# 检查用户权限
mysql -u root -p
SHOW GRANTS FOR 'root'@'localhost';
```

### 2. 端口被占用
**错误**: `Port 8080 was already in use`
**解决方案**:
```bash
# Windows杀死进程
netstat -ano | findstr :8080
taskkill /PID <进程ID> /F

# macOS/Linux杀死进程
lsof -ti :8080 | xargs kill -9
```

### 3. 前端依赖安装失败
**错误**: `npm install` 失败
**解决方案**:
```bash
# 清理缓存
npm cache clean --force

# 删除node_modules重新安装
rm -rf node_modules package-lock.json
npm install

# 使用淘宝镜像
npm config set registry https://registry.npmmirror.com
npm install
```

### 4. 文件上传失败
**错误**: 文件上传提示失败
**解决方案**:
```bash
# 检查上传目录权限
mkdir -p uploads
chmod 755 uploads

# 检查配置文件中的路径
# application.yml中file.upload.path配置
```

### 5. 跨域问题
**错误**: CORS错误
**解决方案**:
在 `application.yml` 中检查CORS配置：
```yaml
cors:
  allowed-origins: http://localhost:5173,http://localhost:3000
  allowed-methods: GET,POST,PUT,DELETE,OPTIONS
  allowed-headers: "*"
  allow-credentials: true
```

## 📱 开发建议

### 1. IDE配置
- **VS Code**: 安装Vue 3、Element Plus、Vetur扩展
- **IntelliJ IDEA**: 安装Lombok插件

### 2. 调试技巧
```bash
# 后端日志查看
tail -f logs/gamevault.log

# 前端控制台调试
# 浏览器F12打开开发者工具

# 数据库查询调试
# 查看MyBatis SQL日志
```

### 3. 性能优化
- 前端启用gzip压缩
- 后端配置连接池
- 数据库索引优化

## 📞 技术支持

如遇到问题，请检查：
1. ✅ 环境版本是否符合要求
2. ✅ 服务启动顺序（数据库 → 后端 → 前端）
3. ✅ 端口是否冲突
4. ✅ 配置文件是否正确
5. ✅ 网络连接是否正常

---

**🎮 GameVault - 让游戏资产管理更简单！**

*最后更新：2025年9月6日*
